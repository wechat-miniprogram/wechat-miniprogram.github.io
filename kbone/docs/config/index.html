<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>配置 | wechat-miniprogram / kbone</title>
    <meta name="description" content="Web 与小程序同构解决方案">
    <link rel="shortcut icon" href="/kbone/docs/favicon.ico">
    
    <link rel="preload" href="/kbone/docs/assets/css/0.styles.4d010c43.css" as="style"><link rel="preload" href="/kbone/docs/assets/js/app.7b927ee0.js" as="script"><link rel="preload" href="/kbone/docs/assets/js/2.440debe4.js" as="script"><link rel="preload" href="/kbone/docs/assets/js/21.df3c8ae7.js" as="script"><link rel="prefetch" href="/kbone/docs/assets/js/10.986e9cc6.js"><link rel="prefetch" href="/kbone/docs/assets/js/11.ae26c43e.js"><link rel="prefetch" href="/kbone/docs/assets/js/12.fa7c3b4a.js"><link rel="prefetch" href="/kbone/docs/assets/js/13.cfbbd42a.js"><link rel="prefetch" href="/kbone/docs/assets/js/14.6b83ac1a.js"><link rel="prefetch" href="/kbone/docs/assets/js/15.9e5b8c74.js"><link rel="prefetch" href="/kbone/docs/assets/js/16.ecd74c21.js"><link rel="prefetch" href="/kbone/docs/assets/js/17.aa19e347.js"><link rel="prefetch" href="/kbone/docs/assets/js/18.e367685d.js"><link rel="prefetch" href="/kbone/docs/assets/js/19.0a55de4a.js"><link rel="prefetch" href="/kbone/docs/assets/js/20.32e7b554.js"><link rel="prefetch" href="/kbone/docs/assets/js/22.f27ec1d9.js"><link rel="prefetch" href="/kbone/docs/assets/js/23.4d8efa86.js"><link rel="prefetch" href="/kbone/docs/assets/js/24.2eb46239.js"><link rel="prefetch" href="/kbone/docs/assets/js/25.8e2f074a.js"><link rel="prefetch" href="/kbone/docs/assets/js/26.13373cc2.js"><link rel="prefetch" href="/kbone/docs/assets/js/27.dcd04660.js"><link rel="prefetch" href="/kbone/docs/assets/js/28.79f239ce.js"><link rel="prefetch" href="/kbone/docs/assets/js/29.d61ec8c8.js"><link rel="prefetch" href="/kbone/docs/assets/js/3.6b27239a.js"><link rel="prefetch" href="/kbone/docs/assets/js/30.584a8d74.js"><link rel="prefetch" href="/kbone/docs/assets/js/31.4f54c81d.js"><link rel="prefetch" href="/kbone/docs/assets/js/32.ac41a4fc.js"><link rel="prefetch" href="/kbone/docs/assets/js/33.ec64d079.js"><link rel="prefetch" href="/kbone/docs/assets/js/34.a074bc43.js"><link rel="prefetch" href="/kbone/docs/assets/js/35.b3b2ad3c.js"><link rel="prefetch" href="/kbone/docs/assets/js/36.90945ff7.js"><link rel="prefetch" href="/kbone/docs/assets/js/37.8fa69a19.js"><link rel="prefetch" href="/kbone/docs/assets/js/38.a9fb33e9.js"><link rel="prefetch" href="/kbone/docs/assets/js/39.5307410a.js"><link rel="prefetch" href="/kbone/docs/assets/js/4.b908b90e.js"><link rel="prefetch" href="/kbone/docs/assets/js/40.2a5759c2.js"><link rel="prefetch" href="/kbone/docs/assets/js/41.18caa070.js"><link rel="prefetch" href="/kbone/docs/assets/js/42.497b8abf.js"><link rel="prefetch" href="/kbone/docs/assets/js/43.e4dd20e0.js"><link rel="prefetch" href="/kbone/docs/assets/js/44.3606db8a.js"><link rel="prefetch" href="/kbone/docs/assets/js/45.74d34346.js"><link rel="prefetch" href="/kbone/docs/assets/js/46.ace5dc15.js"><link rel="prefetch" href="/kbone/docs/assets/js/47.d4586ecf.js"><link rel="prefetch" href="/kbone/docs/assets/js/48.0e445cfe.js"><link rel="prefetch" href="/kbone/docs/assets/js/49.ec5ac1d3.js"><link rel="prefetch" href="/kbone/docs/assets/js/5.1a246727.js"><link rel="prefetch" href="/kbone/docs/assets/js/50.e25450b0.js"><link rel="prefetch" href="/kbone/docs/assets/js/51.6d57ecb4.js"><link rel="prefetch" href="/kbone/docs/assets/js/52.8fac2d2a.js"><link rel="prefetch" href="/kbone/docs/assets/js/53.a440ec3b.js"><link rel="prefetch" href="/kbone/docs/assets/js/54.9e8de6cd.js"><link rel="prefetch" href="/kbone/docs/assets/js/55.3e85d024.js"><link rel="prefetch" href="/kbone/docs/assets/js/6.79a489cf.js"><link rel="prefetch" href="/kbone/docs/assets/js/7.e07b1eef.js"><link rel="prefetch" href="/kbone/docs/assets/js/8.24600193.js"><link rel="prefetch" href="/kbone/docs/assets/js/9.bed9faa0.js">
    <link rel="stylesheet" href="/kbone/docs/assets/css/0.styles.4d010c43.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kbone/docs/" class="home-link router-link-active"><img src="/kbone/docs/logo.svg" alt="wechat-miniprogram / kbone" class="logo"> <span class="site-name can-hide">wechat-miniprogram / kbone</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kbone/docs/" class="nav-link">指南</a></div><div class="nav-item"><a href="/kbone/docs/config/" class="nav-link router-link-exact-active router-link-active">配置</a></div><div class="nav-item"><a href="/kbone/docs/domextend/" class="nav-link">dom/bom 扩展 API</a></div><div class="nav-item"><a href="/kbone/docs/qa/" class="nav-link">Q&amp;A</a></div><div class="nav-item"><a href="/kbone/docs/changelog/" class="nav-link">更新日志</a></div><div class="nav-item"><a href="/kbone/docs/ui/intro/" class="nav-link">kbone-ui</a></div><div class="nav-item"><a href="https://github.com/wechat-miniprogram/kbone" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/community/minihome/mixflow/1213301129006825473" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社区
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kbone/docs/" class="nav-link">指南</a></div><div class="nav-item"><a href="/kbone/docs/config/" class="nav-link router-link-exact-active router-link-active">配置</a></div><div class="nav-item"><a href="/kbone/docs/domextend/" class="nav-link">dom/bom 扩展 API</a></div><div class="nav-item"><a href="/kbone/docs/qa/" class="nav-link">Q&amp;A</a></div><div class="nav-item"><a href="/kbone/docs/changelog/" class="nav-link">更新日志</a></div><div class="nav-item"><a href="/kbone/docs/ui/intro/" class="nav-link">kbone-ui</a></div><div class="nav-item"><a href="https://github.com/wechat-miniprogram/kbone" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/community/minihome/mixflow/1213301129006825473" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社区
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/kbone/docs/config/" class="active sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#页面名称" class="sidebar-link">页面名称</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#origin" class="sidebar-link">origin</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#entry" class="sidebar-link">entry</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#router" class="sidebar-link">router</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#redirect" class="sidebar-link">redirect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#redirect-notfound" class="sidebar-link">redirect.notFound</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#redirect-accessdenied" class="sidebar-link">redirect.accessDenied</a></li></ul></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate" class="sidebar-link">generate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-app" class="sidebar-link">generate.app</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-appwxss" class="sidebar-link">generate.appWxss</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-subpackages" class="sidebar-link">generate.subpackages</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-preloadrule" class="sidebar-link">generate.preloadRule</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-tabbar" class="sidebar-link">generate.tabBar</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-appentry" class="sidebar-link">generate.appEntry</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-wxcustomcomponent" class="sidebar-link">generate.wxCustomComponent</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-globalvars" class="sidebar-link">generate.globalVars</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-autobuildnpm" class="sidebar-link">generate.autoBuildNpm</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#generate-projectconfig" class="sidebar-link">generate.projectConfig</a></li></ul></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#runtime" class="sidebar-link">runtime</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#runtime-wxcomponent" class="sidebar-link">runtime.wxComponent</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#runtime-cookiestore" class="sidebar-link">runtime.cookieStore</a></li></ul></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#app" class="sidebar-link">app</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#appextraconfig" class="sidebar-link">appExtraConfig</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global" class="sidebar-link">global</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-loadingtext" class="sidebar-link">global.loadingText</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-share" class="sidebar-link">global.share</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-windowscroll" class="sidebar-link">global.windowScroll</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-pagebackgroundcolor" class="sidebar-link">global.pageBackgroundColor</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-reachbottom" class="sidebar-link">global.reachBottom</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-reachbottomdistance" class="sidebar-link">global.reachBottomDistance</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-pulldownrefresh" class="sidebar-link">global.pullDownRefresh</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-rem" class="sidebar-link">global.rem</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-pagestyle" class="sidebar-link">global.pageStyle</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#global-extra" class="sidebar-link">global.extra</a></li></ul></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#pages" class="sidebar-link">pages</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization" class="sidebar-link">optimization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-domsubtreelevel" class="sidebar-link">optimization.domSubTreeLevel</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-elementmultiplexing" class="sidebar-link">optimization.elementMultiplexing</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-textmultiplexing" class="sidebar-link">optimization.textMultiplexing</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-commentmultiplexing" class="sidebar-link">optimization.commentMultiplexing</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-domextendmultiplexing" class="sidebar-link">optimization.domExtendMultiplexing</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-stylevaluereduce" class="sidebar-link">optimization.styleValueReduce</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#optimization-attrvaluereduce" class="sidebar-link">optimization.attrValueReduce</a></li></ul></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#projectconfig" class="sidebar-link">projectConfig</a></li><li class="sidebar-sub-header"><a href="/kbone/docs/config/#packageconfig" class="sidebar-link">packageConfig</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h1> <p>以下是 webpack 插件 mp-webpack-plugin 的配置说明。</p> <h2 id="页面名称"><a href="#页面名称" class="header-anchor">#</a> 页面名称</h2> <p>webpack 构建中 entry 配置项里的 key，如下 webpack 配置中 <code>page1</code>，<code>page2</code> 和 <code>page3</code> 即是页面名称：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意这里是 webpack 配置，不是 mp-webpack-plugin 的配置</span>
<span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        page1<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/page1/main.mp.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        page2<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/page2/main.mp.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        page3<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/page3/main.mp.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="origin"><a href="#origin" class="header-anchor">#</a> origin</h2> <p>页面 origin，默认是 <code>https://miniprogram.default</code>。</p> <blockquote><p>PS：因为是所有页面共用一个 orgin，所以要求所有页面必须同源，不然无法正常跳转。</p></blockquote> <h2 id="entry"><a href="#entry" class="header-anchor">#</a> entry</h2> <p>入口页面路由，默认是 <code>/</code>。</p> <h2 id="router"><a href="#router" class="header-anchor">#</a> router</h2> <p>页面路由，用于页面间跳转。其值是一个以<a href="#%E9%A1%B5%E9%9D%A2%E5%90%8D%E7%A7%B0">页面名称</a>作为 key 的对象，每项的值是该页面可以响应的路由。</p> <p>路由可以是多个值，同时支持动态路由。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    router<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        home<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'/(home|index)?'</span><span class="token punctuation">,</span>
            <span class="token string">'/test/(home|index)'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        list<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'/test/list/:id'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        detail<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'/test/detail/:id'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        profile<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'/test/profile'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="redirect"><a href="#redirect" class="header-anchor">#</a> redirect</h2> <p>特殊路由跳转。</p> <h3 id="redirect-notfound"><a href="#redirect-notfound" class="header-anchor">#</a> redirect.notFound</h3> <p>跳转遇到同一个 origin 但是不在 router 里的页面时处理方式，支持的值：</p> <ul><li><code>none</code>：<strong>默认值</strong>，什么都不做</li> <li><code>webview</code>：使用 web-view 组件打开</li> <li><code>error</code>：抛出异常</li> <li><a href="#%E9%A1%B5%E9%9D%A2%E5%90%8D%E7%A7%B0">页面名称</a>：会跳转到对应页面，这个页面必须在主包中</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    redirect<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        notFound<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="redirect-accessdenied"><a href="#redirect-accessdenied" class="header-anchor">#</a> redirect.accessDenied</h3> <p>跳转到 origin 之外的页面时处理方式，值同 <a href="#redirect-notfound">redirect.notFound</a>。</p> <h2 id="generate"><a href="#generate" class="header-anchor">#</a> generate</h2> <p>构建输出配置。</p> <h3 id="generate-app"><a href="#generate-app" class="header-anchor">#</a> generate.app</h3> <p>app 输出配置，支持的值：</p> <ul><li><code>default</code>：<strong>默认值</strong>，会输出 app.js、app.json、app.wxss 和 project.config.json 等文件</li> <li><code>noemit</code>：不输出 app 相关文件和 project.config.json</li> <li><code>noconfig</code>：不输出 project.config.json</li></ul> <h3 id="generate-appwxss"><a href="#generate-appwxss" class="header-anchor">#</a> generate.appWxss</h3> <p>app.wxss 输出配置，支持的值：</p> <ul><li><code>default</code>：<strong>默认值</strong>，输出默认标签样式</li> <li><code>none</code>：输出为空</li> <li><code>display</code>：只输出 display 相关的内容</li></ul> <h3 id="generate-subpackages"><a href="#generate-subpackages" class="header-anchor">#</a> generate.subpackages</h3> <p>小程序分包，暂不支持独立分包，详细注意事项可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。其值是一个以包名称作为 key 的对象，每项的值是该分包内包含的<a href="#%E9%A1%B5%E9%9D%A2%E5%90%8D%E7%A7%B0">页面名称</a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        subpackages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            package1<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            package2<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'detail'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="generate-preloadrule"><a href="#generate-preloadrule" class="header-anchor">#</a> generate.preloadRule</h3> <p>小程序分包预下载，详细注意事项可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/preload.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <blockquote><p>PS：此配置必须搭配 <a href="#generate-subpackages">generate.subpackages</a> 使用。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        preloadRule<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 进入 list 页面时，会预下载名为 package2 的分包</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                network<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
                packages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'package2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="generate-tabbar"><a href="#generate-tabbar" class="header-anchor">#</a> generate.tabBar</h3> <p>小程序 tabBar，详细注意事项可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。其值和官方配置基本一致，但是存在些微不同：</p> <ul><li>使用 <code>pageName</code> 代替官方的 <code>pagePath</code> 字段，其值为<a href="#%E9%A1%B5%E9%9D%A2%E5%90%8D%E7%A7%B0">页面名称</a></li> <li><code>iconPath</code> 和 <code>selectedIconPath</code> 因为不支持网络图片，需要指定对应图片的绝对路径</li></ul> <p>如果需要使用<strong>自定义 tabBar</strong>，则需要配置 <code>custom</code> 字段，其值为需要拷贝到小程序 custom-tab-bar 目录的目录地址。</p> <blockquote><p>PS：tabBar 页面默认进入的 <code>location.pathname</code> 为 <code>/</code>，如果该页面使用了单页路由配置（如 vue-router 等）且默认路由不是 <code>/</code> 的情况则需要处理 <code>/</code> 这个路由，如将其重定向到默认路由等方式。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        tabBar<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            color<span class="token punctuation">:</span> <span class="token string">'#000000'</span><span class="token punctuation">,</span>
            selectedColor<span class="token punctuation">:</span> <span class="token string">'#07c160'</span><span class="token punctuation">,</span>
            backgroundColor<span class="token punctuation">:</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                pageName<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
                text<span class="token punctuation">:</span> <span class="token string">'主页'</span><span class="token punctuation">,</span>
                iconPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/img/home.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                selectedIconPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/img/home-sel.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                pageName<span class="token punctuation">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span>
                text<span class="token punctuation">:</span> <span class="token string">'个人页'</span><span class="token punctuation">,</span>
                iconPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/img/profile.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                selectedIconPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/img/profile-sel.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用自定义 tabBar</span>
            custom<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/custom-tab-bar'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="generate-appentry"><a href="#generate-appentry" class="header-anchor">#</a> generate.appEntry</h3> <p>自定义生成小程序 app.js，值为 webpack entry 配置项中的 key。如果一个 webpack 配置的入口被声明为 app.js 的入口，那么它就不会被作为页面处理。</p> <h3 id="generate-wxcustomcomponent"><a href="#generate-wxcustomcomponent" class="header-anchor">#</a> generate.wxCustomComponent</h3> <p>小程序自定义组件使用配置，如果需要在 kbone 项目中使用现有的小程序自定义组件，必须先在此处声明方可使用。需要声明的字段：</p> <ul><li><code>root</code>：所有要使用的自定义组件所在的根目录，构建时这个目录会被完整拷贝到小程序目录下</li> <li><code>usingComponents</code>：要使用的自定义组件配置</li></ul> <p>其中每个自定义组件的配置都需要指明其相对于 <code>root</code> 的路径，如果需要传递 properties 到这个自定义组件里面，则需要配置 <code>props</code> 字段，如果需要监听这个自定义组件的事件，则需要配置 <code>events</code> 字段。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        wxCustomComponent<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            root<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/custom-components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			usingComponents<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				<span class="token string">'comp-a'</span><span class="token punctuation">:</span> <span class="token string">'comp-a/index'</span><span class="token punctuation">,</span>
				<span class="token string">'comp-b'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    path<span class="token punctuation">:</span> <span class="token string">'comp-b/index'</span><span class="token punctuation">,</span>
                    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'propa'</span><span class="token punctuation">,</span> <span class="token string">'propb'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 组件 properties，如果在相应的 dom 节点上设置了和列表中的 property 同名的 attribute，那么它会同步到组件的 properties 上</span>
                    events<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'someevent'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 组件事件，会转化成 dom 事件触发到对应的 dom 节点上</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="generate-globalvars"><a href="#generate-globalvars" class="header-anchor">#</a> generate.globalVars</h3> <p>注入全局变量，每一项为 <code>[key, value]</code> 的结构。构建时会将需要注入的全局变量声明在所有要执行的代码之前，以方便代码里直接使用。</p> <p>如果配置了 <code>['TEST_VAR_STRING', '\'miniprogram\'']</code>，则会生成类似 <code>var TEST_VAR_STRING = 'miniprogram'</code> 的声明语句；不指定 value 的话，则会从 window 下读取，如 <code>['CustomEvent']</code> 则会生成类似 <code>var CustomEvent = window.CustomEvent</code> 的声明语句。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        globalVars<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token string">'TEST_VAR_STRING'</span><span class="token punctuation">,</span> <span class="token string">'\'miniprogram\''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">'TEST_VAR_NUMBER'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">'TEST_VAR_BOOL'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">'TEST_VAR_FUNCTION'</span><span class="token punctuation">,</span> <span class="token string">'function() {return \'I am function\'}'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">'TEST_VAR_OTHERS'</span><span class="token punctuation">,</span> <span class="token string">'window.document'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">'CustomEvent'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="generate-autobuildnpm"><a href="#generate-autobuildnpm" class="header-anchor">#</a> generate.autoBuildNpm</h3> <p>构建完成后是否自动安装小程序依赖，支持的值：</p> <ul><li><code>false</code>：<strong>默认值</strong>，不自动安装依赖</li> <li><code>true/'npm'</code>：使用 npm 自动安装依赖</li> <li><code>'yarn'</code>：使用 yarn 自动安装依赖</li></ul> <h3 id="generate-projectconfig"><a href="#generate-projectconfig" class="header-anchor">#</a> generate.projectConfig</h3> <p>调整 project.config.json 文件的生成目录路径，需传入绝对路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    generate<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        projectConfig<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist/mp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 注意，这是目录路径，不是文件路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="runtime"><a href="#runtime" class="header-anchor">#</a> runtime</h2> <p>运行时配置。</p> <h3 id="runtime-wxcomponent"><a href="#runtime-wxcomponent" class="header-anchor">#</a> runtime.wxComponent</h3> <p>内置组件使用配置，支持的值：</p> <ul><li><code>default</code>：<strong>默认值</strong>，表示可使用 <code>wx-component</code> 标签或类似 <code>wx-view</code> 这样使用前缀的用法来使用内置组件</li> <li><code>noprefix</code>：支持 <code>default</code> 用法的前提下，也支持无前缀的用法，比如直接使用 <code>view</code> 标签表示 <code>view</code> 内置组件</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- wx-component 标签用法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wx-component</span> <span class="token attr-name">behavior</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>picker<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>region<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>选择城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wx-component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wx-component</span> <span class="token attr-name">behavior</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onClickShare<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wx-component</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- wx- 前缀用法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wx-picker</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>region<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>选择城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wx-picker</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wx-button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onClickShare<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wx-button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 如果配置值为 noprefix，还支持下面的用法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>region<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>选择城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onClickShare<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="runtime-cookiestore"><a href="#runtime-cookiestore" class="header-anchor">#</a> runtime.cookieStore</h3> <p>cookie 存储方式，支持的值：</p> <ul><li><code>default</code>：<strong>默认值</strong>，存储在小程序的 storage 中，所有页面共享</li> <li><code>storage</code>：存储在小程序的 storage 中，页面间不共享</li> <li><code>memory</code>：存储在内存中，页面间不共享</li> <li><code>globalstorage</code>：同 <code>default</code></li> <li><code>globalmemory</code>：存储在内存中，所有页面共享</li></ul> <h2 id="app"><a href="#app" class="header-anchor">#</a> app</h2> <p>app 窗口配置，可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="appextraconfig"><a href="#appextraconfig" class="header-anchor">#</a> appExtraConfig</h2> <p>app 补充配置，除 pages、window、tabBar、subpackages、preloadRule 配置外的其他配置，可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="global"><a href="#global" class="header-anchor">#</a> global</h2> <p>所有页面的全局配置。</p> <h3 id="global-loadingtext"><a href="#global-loadingtext" class="header-anchor">#</a> global.loadingText</h3> <p>页面加载时是否需要 loading 提示，默认空，即不出现提示。</p> <h3 id="global-share"><a href="#global-share" class="header-anchor">#</a> global.share</h3> <p>是否支持分享，若支持，会展示分享按钮并调用 app 的 onShareAppMessage 按钮，默认 <code>false</code>。</p> <h3 id="global-windowscroll"><a href="#global-windowscroll" class="header-anchor">#</a> global.windowScroll</h3> <p>是否需要 window scroll 事件，在低端安卓机会影响性能，默认 <code>false</code>。</p> <h3 id="global-pagebackgroundcolor"><a href="#global-pagebackgroundcolor" class="header-anchor">#</a> global.pageBackgroundColor</h3> <p>page 的背景色，若配置了，会在每个页面的 wxss 前面追加 <code>page {background-color: ${pageBackgroundColor};}</code>。</p> <h3 id="global-reachbottom"><a href="#global-reachbottom" class="header-anchor">#</a> global.reachBottom</h3> <p>是否支持上拉触底，若支持可监听 window 的 reachbottom 事件，默认 <code>false</code>。</p> <h3 id="global-reachbottomdistance"><a href="#global-reachbottomdistance" class="header-anchor">#</a> global.reachBottomDistance</h3> <p>页面上拉触底事件触发时距页面底部距离，单位为 px，必须搭配 <a href="#global-reachbottom">global.reachBottom</a> 使用。</p> <h3 id="global-pulldownrefresh"><a href="#global-pulldownrefresh" class="header-anchor">#</a> global.pullDownRefresh</h3> <p>是否支持下拉刷新，若支持可监听 window 的 pulldownrefresh 事件，默认 <code>false</code>。</p> <h3 id="global-rem"><a href="#global-rem" class="header-anchor">#</a> global.rem</h3> <p>是否支持 rem，默认 <code>false</code>。若需要使用 rem，在小程序端可参考下述方式来设置根字体大小：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>isMiniprogram<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 小程序</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>screenWidth <span class="token operator">/</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>PS：这个特性只在基础库 2.9.0 及以上版本支持。</p></blockquote> <h3 id="global-pagestyle"><a href="#global-pagestyle" class="header-anchor">#</a> global.pageStyle</h3> <p>是否支持通过修改 <code>document.documentElement</code> 的样式来修改页面的样式，默认 <code>false</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'#fffbe7'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>PS：这个特性只在基础库 2.9.0 及以上版本支持。</p></blockquote> <h3 id="global-extra"><a href="#global-extra" class="header-anchor">#</a> global.extra</h3> <p>其他页面配置，可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="pages"><a href="#pages" class="header-anchor">#</a> pages</h2> <p>各个页面的单独配置，可以为单个页面做个性化处理，覆盖全局配置。每个页面的配置项同 <a href="#global">global</a> 配置。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    pages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        home<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            pullDownRefresh<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        list<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            loadingText<span class="token punctuation">:</span> <span class="token string">'加载中...'</span><span class="token punctuation">,</span>
            share<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="optimization"><a href="#optimization" class="header-anchor">#</a> optimization</h2> <p>优化配置，控制优化级别，通常使用默认配置即可。</p> <h3 id="optimization-domsubtreelevel"><a href="#optimization-domsubtreelevel" class="header-anchor">#</a> optimization.domSubTreeLevel</h3> <p>将多少层级的 dom 子树作为一个自定义组件渲染，支持 <code>1 - 10</code>，默认值为 <code>10</code>。</p> <h3 id="optimization-elementmultiplexing"><a href="#optimization-elementmultiplexing" class="header-anchor">#</a> optimization.elementMultiplexing</h3> <p>element 对象复用，默认 <code>true</code>。当页面被关闭时会回收对象，但是如果有地方保留有对象引用的话，注意要关闭此项，否则可能出问题</p> <h3 id="optimization-textmultiplexing"><a href="#optimization-textmultiplexing" class="header-anchor">#</a> optimization.textMultiplexing</h3> <p>文本节点对象复用，默认 <code>true</code>。注意事项同 <a href="#optimization-elementmultiplexing">optimization.elementMultiplexing</a>。</p> <h3 id="optimization-commentmultiplexing"><a href="#optimization-commentmultiplexing" class="header-anchor">#</a> optimization.commentMultiplexing</h3> <p>注释节点对象复用，默认 <code>true</code>。注意事项同 <a href="#optimization-elementmultiplexing">optimization.elementMultiplexing</a>。</p> <h3 id="optimization-domextendmultiplexing"><a href="#optimization-domextendmultiplexing" class="header-anchor">#</a> optimization.domExtendMultiplexing</h3> <p>节点相关对象复用，如 style、classList 对象等，默认 <code>true</code>。注意事项同 <a href="#optimization-elementmultiplexing">optimization.elementMultiplexing</a>。</p> <h3 id="optimization-stylevaluereduce"><a href="#optimization-stylevaluereduce" class="header-anchor">#</a> optimization.styleValueReduce</h3> <p>如果设置 style 属性时存在某个属性的值超过一定值，则进行删减，默认空，即不做删减。</p> <p>一个常见的例子是样式中的 backgroundImage 如果设置一张非常大的图片的 base64 串，那么它的值可能就会很大。如果配置了其值为 5000，那么这个 base64 串长度如果超过了 5000 就会被删减，backgroundImage 的值置为 <code>undefined</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        styleValueReduce<span class="token punctuation">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="optimization-attrvaluereduce"><a href="#optimization-attrvaluereduce" class="header-anchor">#</a> optimization.attrValueReduce</h3> <p>如果设置 dom 属性时存在某个属性的值超过一定值，则进行删减，默认空，即不做删减。使用场景可参考 <a href="#optimization-stylevaluereduce">optimization.styleValueReduce</a>。</p> <h2 id="projectconfig"><a href="#projectconfig" class="header-anchor">#</a> projectConfig</h2> <p>项目配置，会被合并到 project.config.json。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    projectConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        appid<span class="token punctuation">:</span> <span class="token string">'wx1234567890'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="packageconfig"><a href="#packageconfig" class="header-anchor">#</a> packageConfig</h2> <p>包配置，会被合并到 package.json。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mp-webpack-plugin 配置</span>
<span class="token punctuation">{</span>
    packageConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        author<span class="token punctuation">:</span> <span class="token string">'wechat-miniprogram'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/kbone/docs/assets/js/app.7b927ee0.js" defer></script><script src="/kbone/docs/assets/js/2.440debe4.js" defer></script><script src="/kbone/docs/assets/js/21.df3c8ae7.js" defer></script>
  </body>
</html>
